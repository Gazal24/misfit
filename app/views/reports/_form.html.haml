- if not params[:layout] 
  = form_for(@report, :action => url(:show_report, :report_type => params[:report_type]), :method => :get) do
    %table
      %tr
        %td
          ="#{@report.class.name} for"
          -report = @report.class.to_s.snake_case
        -if @report.respond_to?(:from_date)
          %td
            =date_select_for(@report, "from_date", :date => @report.from_date)
        -if @report.respond_to?(:to_date)
          %td
            =date_select_for(@report, "to_date", :date => @report.to_date)
        -if @report.respond_to?(:date)
          %td
            =date_select_for(@report, "date", :date => @report.date)
      %tr
        %td
          - branch_id = (params[report] and params[report][:branch_id]) ? params[report][:branch_id] : nil
          - center_id = (params[report] and params[report][:center_id]) ? params[report][:center_id] : nil
          Branch: 
          =select(:branch_id , :collection => Branch.all, :value_method => :id, :text_method => :name, :include_blank => true, :selected => branch_id)
        %td
          Center: 
          - centers = (branch_id and not branch_id.blank?) ? Center.all(:branch_id => branch_id, :order => [:name]) : Center.all(:order => [:name])
          =select(:center_id , :collection => centers.all.map{|x| [x.id, "#{x.branch.name} -- #{x.name}"]}, :include_blank => true, :selected => center_id)
        %td
          Staff member:
          - staff_member_id = (params[report] and params[report][:staff_member_id]) ? params[report][:staff_member_id] : nil
          =select(:staff_member_id , :collection => StaffMember.all.map{|x| [x.id, x.name]}, :include_blank => true, :selected => staff_member_id)
        %td
          =submit "Go"
