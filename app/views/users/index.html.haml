%h1
  Users
%p
  Manage existing users accounts or
  = link_to 'create a new user', resource(:users, :new)
  account.
%table.narrow.form{ :width => '100%' }
  %thead
    %tr
      %th
      %th id
      %th login
      %th data entry
      %th mis manager
      %th admin
      %th read only
      %th payments created
      %th payments deleter
  %tbody
  - for user in @users
    %tr{ :class => cycle('odd','') }
      %td &nbsp;
      %td
        = user.id
      %td
        %b= user.login
      %td
        %b= user.data_entry_operator.nil? || !user.data_entry_operator ? "" : user.data_entry_operator
      %td
        %b= user.mis_manager.nil?|| !user.mis_manager ? "" : user.mis_manager
      %td
        %b= user.admin.nil? || !user.admin ? "" : user.admin
      %td
        %b= user.read_only_user.nil? || !user.read_only_user ? "" : user.read_only_user
      %td
        %b= user.payments_created.count
      %td
        %b= user.payments_deleted.count
      - if session.user.id == 1  # only show to admin
        %td
          = link_to 'edit', resource(user, :edit)
          = link_to 'delete', resource(user, :delete) unless user.id == 1  # do not show for admin
  %tfoot
    %tr
      %td{ :colspan => 7 }
